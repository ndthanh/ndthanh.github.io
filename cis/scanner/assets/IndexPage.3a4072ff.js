import{u as b,a as E,Q as S,b as p,c as x,V as N}from"./index.95c4e413.js";import{m as O}from"./use-dark.06a2e878.js";import{r as n,o as P,G as v,O as V,S as i,N as T,W as d,I as C,J as f,L as I,K as u,M as w}from"./index.5748c2df.js";const Q={class:"q-pa-md"},k={class:"q-gutter-md",style:{"max-width":"600px"}},B=i("br",null,null,-1),q=i("br",null,null,-1),G={__name:"IndexPage",setup(H){const r=n(""),t=n(""),h=n(""),l=n(!1),s=n(""),c=n(""),{isOnline:m}=b(),R=E("history");P(()=>{l.value=!0;const a=o=>{s.value=o.coords.latitude,c.value=o.coords.longitude,console.log(s.value),console.log(s.value),l.value=!1},e=o=>{s.value="device_not_supported",c.value="device_not_supported",l.value=!1};navigator.geolocation.getCurrentPosition(a,e)});function g(a){t.value=a}async function _(a){try{await a}catch(e){e.name==="NotAllowedError"?e.value="ERROR: you need to grant camera access permission":e.name==="NotFoundError"?e.value="ERROR: no camera on this device":e.name==="NotSupportedError"?e.value="ERROR: secure context required (HTTPS, localhost)":e.name==="NotReadableError"?e.value="ERROR: is the camera already in use?":e.name==="OverconstrainedError"?e.value="ERROR: installed cameras are not suitable":e.name==="StreamApiNotSupportedError"?e.value="ERROR: Stream API is not supported in this browser":e.name==="InsecureContextError"?e.value="ERROR: Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":e.value=`ERROR: Camera error (${e.name})`}}function y(){l.value=!0;const a={method:"POST",contentType:"application/json",body:JSON.stringify({consumerphone:r.value,dealercode:t.value,uuid:R.uuid,latitude:s.value,longitude:c.value})};fetch("https://script.google.com/macros/s/AKfycbyihlJ_YdCjXHcOmLuGXvpInPIPmvd8pvElS2CwP-N8Ybr-1zprMeiVLYW9nshHqm1p/exec",a).then(e=>e.json()).then(e=>{alert(e.message),r.value="",t.value="",l.value=!1})}return(a,e)=>(v(),V("div",Q,[i("pre",null,T(h.value),1),d(m)?I("",!0):(v(),C(S,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:f(()=>[w(" You have lost connection to the internet. This app is offline. ")]),_:1})),i("div",k,[u(p,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),type:"tel",label:"Phone Number"},null,8,["modelValue"]),u(p,{readonly:"",modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value=o),type:"text",label:"Please scan your QR"},null,8,["modelValue"])]),B,u(d(N.exports.QrcodeStream),{onDecode:g,onInit:_}),q,u(x,{position:"bottom-right",offset:[18,18]},{default:f(()=>[u(O,{onClick:y,fab:"",push:"",color:"primary",loading:l.value,disable:r.value.length===0||t.value.length===0||!d(m),label:"Send data"},null,8,["loading","disable"])]),_:1})]))}};export{G as default};
